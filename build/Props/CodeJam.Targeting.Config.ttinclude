<#@ import namespace="static GeneratedTextTransformation.Shims" #><#+
#nullable enable

	// Well-known monikers. See https://docs.microsoft.com/en-us/dotnet/standard/frameworks
	// We do package
	// * net core 3.1, 6.0, 7.0
	// * net standard 2.0, 2.1
	// * net framework 3.5, 4.0, 4.5, 4.6.1, 4.7.2
	// We do run tests over
	// * net core 3.1, 5.0, 6.0, 7.0
	// * net framework 3.5, 4.0, 4.5, 4.6.1, 4.7.2, 4.8
	private static readonly TargetingOptions Targeting = new()
	{
		DefaultFramework = "net6.0",
		NetCoreShims =
		{
			["netcoreapp1.0"] = TheraotCore,
			["netcoreapp1.1"] = TheraotCore,
			["netcoreapp2.0"] = TheraotCore,
			["netcoreapp2.1"] = TheraotCore,
			["netcoreapp2.2"] = TheraotCore | BclAsyncInterfaces | LangInit | LangNullable | LangIndexRange,
			["netcoreapp3.0"] = LangInit,
			["netcoreapp3.1"] = LangInit | PackageAndTest,
			["net5.0"] = None | Test,
			["net6.0"] = None | PackageAndTest | Minimal,
			["net7.0"] = None | PackageAndTest
		},
		NetStandardShims =
		{
			["netstandard1.0"] = LegacyNetStandard,
			["netstandard1.1"] = LegacyNetStandard,
			["netstandard1.2"] = LegacyNetStandard,
			["netstandard1.3"] = LegacyNetStandard,
			["netstandard1.4"] = LegacyNetStandard,
			["netstandard1.5"] = LegacyNetStandard,
			["netstandard1.6"] = LegacyNetStandard,
			["netstandard2.0"] = LegacyNetStandard | Package | Minimal,
			["netstandard2.1"] = NetStandard | Package
		},
		NetFrameworkShims =
		{
			["net11"] = LegacyNetFramework,
			["net20"] = LegacyNetFramework,
			["net35"] = LegacyNetFramework | PackageAndTest,
			["net40"] = NetFramework | PackageAndTest,
			["net403"] = NetFramework,
			["net45"] = NetFramework | PackageAndTest,
			["net451"] = NetFramework,
			["net452"] = NetFramework,
			["net46"] = NetFramework,
			["net461"] = NetFramework | PackageAndTest | Minimal,
			["net462"] = NetFramework,
			["net47"] =NetFramework,
			["net471"] = NetFramework,
			["net472"] = NetFramework | PackageAndTest | BclAsyncInterfaces,
			["net48"] = NetFramework | PackageAndTest | BclAsyncInterfaces
		},
		DefaultPackageVersions =
		{
			["FluentAssertions"] = "6.11.0"
		},
		PackageVersionOverrides =
		{
			["net45"] = new()
			{
				["FluentAssertions"] = "5.10.3"
			},
			["net40"] = new()
			{
				["FluentAssertions"] = "4.19.4"
			},
			["net35"] = new()
			{
				["FluentAssertions"] = "2.2.0"
			}
		}
	};

	private class TargetingOptions
	{
		public string DefaultFramework { get; set; } = default!;

		public Dictionary<string, Shims> NetCoreShims { get; } = new();

		public Dictionary<string, Shims> NetStandardShims { get; } = new();

		public Dictionary<string, Shims> NetFrameworkShims { get; } = new();

		public PackageVersions DefaultPackageVersions { get; }= new();

		public Dictionary<string, PackageVersions> PackageVersionOverrides { get; } = new();
	}

	public class PackageVersions: Dictionary<string, string> {}


	[Flags]
	public enum Shims
	{
		// Flags
		None = 0x0,
		TheraotCore = 0x1,
		SystemMemory = 0x2,
		BclAsyncInterfaces = 0x4,
		ReferenceAssemblies = 0x8,
		SystemDiagnosticsContractsPackage = 0x10,
		SystemMemoryPackage = 0x20,
		SystemDiagnosticsContractsReference = 0x40,
		LangInit = 0x80,
		LangNullable = 0x100,
		LangIndexRange = 0x200,
		Package = 0x400,
		Test = 0x800,
		Minimal = 0x1000,

		// Presets
		InitAndNullable = LangInit | LangNullable | LangIndexRange,

		NetCore = None,
		LegacyNetCore = SystemDiagnosticsContractsPackage | TheraotCore,
		NetStandard = InitAndNullable,
		LegacyNetStandard = SystemDiagnosticsContractsPackage | TheraotCore,
		NetFramework = SystemDiagnosticsContractsReference | SystemMemoryPackage | TheraotCore,
		LegacyNetFramework = SystemDiagnosticsContractsReference | ReferenceAssemblies | SystemMemoryPackage | TheraotCore,
		PackageAndTest = Package | Test,

		CompatibilityShims = TheraotCore
			| BclAsyncInterfaces
			| ReferenceAssemblies
			| SystemDiagnosticsContractsPackage
			| SystemDiagnosticsContractsReference
			| InitAndNullable
	}
#>